<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Trackmania with Openplanet on Steam Deck/Linux | Nick Guzzardo</title>
<meta name="keywords" content="linux, steam-deck, linux-gaming">
<meta name="description" content="This guide is still untested, but in theory should work on the steam deck or any
other linux distro. Maybe pictures coming soon.">
<meta name="author" content="Nick Guzzardo">
<link rel="canonical" href="https://nickguz.github.io/posts/trackmania-openplanet-linux/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css" integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://nickguz.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://nickguz.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nickguz.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://nickguz.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://nickguz.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Trackmania with Openplanet on Steam Deck/Linux" />
<meta property="og:description" content="This guide is still untested, but in theory should work on the steam deck or any
other linux distro. Maybe pictures coming soon." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nickguz.github.io/posts/trackmania-openplanet-linux/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-16T13:15:00-05:00" />
<meta property="article:modified_time" content="2023-01-16T13:15:00-05:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Trackmania with Openplanet on Steam Deck/Linux"/>
<meta name="twitter:description" content="This guide is still untested, but in theory should work on the steam deck or any
other linux distro. Maybe pictures coming soon."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://nickguz.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Trackmania with Openplanet on Steam Deck/Linux",
      "item": "https://nickguz.github.io/posts/trackmania-openplanet-linux/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Trackmania with Openplanet on Steam Deck/Linux",
  "name": "Trackmania with Openplanet on Steam Deck\/Linux",
  "description": "This guide is still untested, but in theory should work on the steam deck or any other linux distro. Maybe pictures coming soon.\n",
  "keywords": [
    "linux", "steam-deck", "linux-gaming"
  ],
  "articleBody": "This guide is still untested, but in theory should work on the steam deck or any other linux distro. Maybe pictures coming soon.\nBase Game Installation Download the Ubisoft Connect installer to your Downloads directory\ncurl -o $HOME/Downloads/UbisoftConnectInstaller.exe -L https://ubi.li/4vxt9 Now we want to add the installer to steam:\n Click “Add a Game”, then “Add a Non-Steam game” in the bottom left of your steam library. Click “Browse” and find the installer we just downloaded. You will probably need to change the “Look in” directory at the top to something like /home/username in the dropdown. Also change file type to “All Files” so you can actually see the .exe file. Open the file, then click “Add Selected Programs”. Find UbisoftConnectInstaller.exe in your library now, right click it and go to properties. Click “Compatibility”, check “Force the use of a specific Steam Play compatibility tool, then pick “Proton Experimental” from the dropdown. Note: this may break in the future, but at the current moment proton experimental works well for this. If it doesn’t work, try using an older version of proton.  Now you can just click “Play” and you should see the installer popup. Just run through this like usual, but don’t check the box at the end to start the launcher just yet.\nOnce this is done, we want to change this library entry to open the launcher we just installed instead of the installer.\n Go back into the ubisoft launcher properties in steam. Click “Browse” under “Target” and “Start In” and select “UbisoftConnect.exe” from the wine prefix we just created. This should be the most recently updated prefix in /home/deck/.local/share/Steam/steamapps/compatdata. The full path will look something like /home/nickguz/.steam/steam/steamapps/compatdata/2965145486/pfx/drive_c/Program Files (x86)/Ubisoft/Ubisoft Game Launcher/UbisoftConnect.exe   “Play” this again and it’ll open the Ubisoft launcher. Sign in and download Trackmania like usual.\nOpenplanet Installation  Download the Openplanet installer from https://openplanet.dev/download. Leave it in your Downloads directory. We want to run the installer with the same proton version and wine prefix that we just used. Assuming that your most recently updated directory is the one we’ve been working with, you should be able to run these commands, maybe modifying the steam directory location: # This will grab your most recently modified compatibility directory, so # don't run this if you've added another one since installing Ubisoft Connect. # If you have, you'll have to go to your compatdata directory and find it tm_pfx=$(ls -At $HOME/.local/share/Steam/steamapps/compatdata | head -1)  # Set the Proton directory to use. If you didn't use experimental, you'll need to choose whichever version you did use proton_dir=\"$HOME/.local/share/Steam/steamapps/common/Proton - Experimental\"  # Now run the installer. You might need to change the Openplanet filename if a newer version has been released WINEPREFIX=$HOME/.local/share/Steam/steamapps/compatdata/$tm_pfx/pfx $proton_dir/files/bin/wine $HOME/Downloads/OpenplanetNext_1.25.21.exe  If everything was set properly in the last step, you should be able to run through the installer like normal. You should be able to find Trackmania in the C directory. It will be in C:\\Program Files (x86)\\ Ubisoft\\ Ubisoft Game Launcher\\Games\\Trackmania. Select this directory. If you don’t see that there, the wine prefix is most likely not set correctly. Make sure it’s set to the pfx dir of the correct prefix.  Okay, we’re almost done. Now we just need to enable the dinput8.dll.\n Install protontricks if you don’t already have it. On steam deck, this can be done through Discover. Now just search protontricks in the start menu - select the proper steam app - Select the default wineprefix - Run winecfg to open the same menu. Click the Libaries tab. In the “New override for library” box, enter dinput8 and click Add, Apply, OK.  If all went well, the next time you boot up Trackmania you should see in the topleft corner the little Openplanet notification. You probably want to edit your controller layout if playing on steam deck and bind some button to F3 so that you can actually open Openplanet.\nAnd one last thing. If you want your Ubisoft Connect in steam to open Trackmania directly, just add uplay://launch/5595/0 to launch options. This will leave the Ubisoft launcher open though after exiting, so just close that after closing Trackmania, or just force close it through steam (B to abort on steam deck after exiting Trackmania).\nAll done!\nCredits to Darren Griffin who wrote this post of which I adapted the first half of this guide from.\n",
  "wordCount" : "721",
  "inLanguage": "en",
  "datePublished": "2023-01-16T13:15:00-05:00",
  "dateModified": "2023-01-16T13:15:00-05:00",
  "author":[{
    "@type": "Person",
    "name": "Nick Guzzardo"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://nickguz.github.io/posts/trackmania-openplanet-linux/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Nick Guzzardo",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nickguz.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://nickguz.github.io" accesskey="h" title="Nick Guzzardo (Alt + H)">Nick Guzzardo</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Trackmania with Openplanet on Steam Deck/Linux
    </h1>
    <div class="post-meta"><span title='2023-01-16 13:15:00 -0500 EST'>January 16, 2023</span>&nbsp;·&nbsp;Nick Guzzardo

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#base-game-installation" aria-label="Base Game Installation">Base Game Installation</a></li>
                <li>
                    <a href="#openplanet-installation" aria-label="Openplanet Installation">Openplanet Installation</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>This guide is still untested, but in theory should work on the steam deck or any
other linux distro. Maybe pictures coming soon.</p>
<h2 id="base-game-installation">Base Game Installation<a hidden class="anchor" aria-hidden="true" href="#base-game-installation">#</a></h2>
<p>Download the Ubisoft Connect installer to your Downloads directory</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -o $HOME/Downloads/UbisoftConnectInstaller.exe -L https://ubi.li/4vxt9
</span></span></code></pre></div><p>Now we want to add the installer to steam:</p>
<ol>
<li>Click &ldquo;Add a Game&rdquo;, then &ldquo;Add a Non-Steam game&rdquo; in the bottom left of your
steam library.</li>
<li>Click &ldquo;Browse&rdquo; and find the installer we just downloaded. You will probably
need to change the &ldquo;Look in&rdquo; directory at the top to something like
/home/username in the dropdown. Also change file type to &ldquo;All Files&rdquo; so you
can actually see the .exe file.</li>
<li>Open the file, then click &ldquo;Add Selected Programs&rdquo;.</li>
<li>Find UbisoftConnectInstaller.exe in your library now, right click it and go
to properties.</li>
<li>Click &ldquo;Compatibility&rdquo;, check &ldquo;Force the use of a specific Steam Play
compatibility tool, then pick &ldquo;Proton Experimental&rdquo; from the dropdown.  Note:
this may break in the future, but at the current moment proton experimental
works well for this. If it doesn&rsquo;t work, try using an older version of
proton.</li>
</ol>
<p>Now you can just click &ldquo;Play&rdquo; and you should see the installer popup. Just run
through this like usual, but don&rsquo;t check the box at the end to start the
launcher just yet.</p>
<p>Once this is done, we want to change this library entry to open the launcher we
just installed instead of the installer.</p>
<ol>
<li>Go back into the ubisoft launcher properties in steam.</li>
<li>Click &ldquo;Browse&rdquo; under &ldquo;Target&rdquo; and &ldquo;Start In&rdquo; and select &ldquo;UbisoftConnect.exe&rdquo;
from the wine prefix we just created.  This should be the most recently
updated prefix in <code>/home/deck/.local/share/Steam/steamapps/compatdata</code>.  The
full path will look something like
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/home/nickguz/.steam/steam/steamapps/compatdata/2965145486/pfx/drive_c/Program Files <span style="color:#f92672">(</span>x86<span style="color:#f92672">)</span>/Ubisoft/Ubisoft Game Launcher/UbisoftConnect.exe
</span></span></code></pre></div></li>
</ol>
<p>&ldquo;Play&rdquo; this again and it&rsquo;ll open the Ubisoft launcher. Sign in and download
Trackmania like usual.</p>
<h2 id="openplanet-installation">Openplanet Installation<a hidden class="anchor" aria-hidden="true" href="#openplanet-installation">#</a></h2>
<ol>
<li>Download the Openplanet installer from <a href="https://openplanet.dev/download">https://openplanet.dev/download</a>. Leave
it in your Downloads directory.</li>
<li>We want to run the installer with the same proton version and wine prefix
that we just used.  Assuming that your most recently updated directory is the
one we&rsquo;ve been working with, you should be able to run these commands, maybe
modifying the steam directory location:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># This will grab your most recently modified compatibility directory, so</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># don&#39;t run this if you&#39;ve added another one since installing Ubisoft Connect.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you have, you&#39;ll have to go to your compatdata directory and find it</span>
</span></span><span style="display:flex;"><span>tm_pfx<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>ls -At $HOME/.local/share/Steam/steamapps/compatdata | head -1<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set the Proton directory to use. If you didn&#39;t use experimental, you&#39;ll need to choose whichever version you did use</span>
</span></span><span style="display:flex;"><span>proton_dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.local/share/Steam/steamapps/common/Proton - Experimental&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Now run the installer. You might need to change the Openplanet filename if a newer version has been released</span>
</span></span><span style="display:flex;"><span>WINEPREFIX<span style="color:#f92672">=</span>$HOME/.local/share/Steam/steamapps/compatdata/$tm_pfx/pfx $proton_dir/files/bin/wine $HOME/Downloads/OpenplanetNext_1.25.21.exe
</span></span></code></pre></div></li>
<li>If everything was set properly in the last step, you should be able to run
through the installer like normal.  You should be able to find Trackmania in
the C directory. It will be in <code>C:\Program Files (x86)\ Ubisoft\ Ubisoft Game Launcher\Games\Trackmania</code>.  Select this directory. If you don&rsquo;t see that
there, the wine prefix is most likely not set correctly. Make sure it&rsquo;s set
to the pfx dir of the correct prefix.</li>
</ol>
<p>Okay, we&rsquo;re almost done. Now we just need to enable the <code>dinput8.dll</code>.</p>
<ol>
<li>Install protontricks if you don&rsquo;t already have it. On steam deck, this can be
done through Discover.</li>
<li>Now just search protontricks in the start menu -&gt; select the proper steam app
-&gt; Select the default wineprefix -&gt; Run winecfg to open the same menu.</li>
<li>Click the Libaries tab. In the &ldquo;New override for library&rdquo; box, enter
<code>dinput8</code> and click Add, Apply, OK.</li>
</ol>
<p>If all went well, the next time you boot up Trackmania you should see in the
topleft corner the little Openplanet notification. You probably want to edit
your controller layout if playing on steam deck and bind some button to F3 so
that you can actually open Openplanet.</p>
<p>And one last thing. If you want your Ubisoft Connect in steam to open Trackmania
directly, just add <code>uplay://launch/5595/0</code> to launch options. This will leave
the Ubisoft launcher open though after exiting, so just close that after closing
Trackmania, or just force close it through steam (B to abort on steam deck after
exiting Trackmania).</p>
<p>All done!</p>
<p><em>Credits to Darren Griffin who wrote <a href="https://mrdarrengriffin.com/installing-trackmania-on-the-steam-deck/">this post</a> of which I adapted the first half
of this guide from.</em></p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://nickguz.github.io/tags/linux/">linux</a></li>
      <li><a href="https://nickguz.github.io/tags/steam-deck/">steam-deck</a></li>
      <li><a href="https://nickguz.github.io/tags/linux-gaming/">linux-gaming</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://nickguz.github.io">Nick Guzzardo</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
