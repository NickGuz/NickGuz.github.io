<!DOCTYPE html>
<html lang="en">
<html class="dark light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    

    
    
    
    <title>
         Trackmania with Openplanet on Steam Deck&#x2F;Linux
        
    </title>

        
            <meta property="og:title" content="Trackmania with Openplanet on Steam Deck&#x2F;Linux" />
        
     

     
         
     

     
         
    

    
    

    
    
        <link href=https://NickGuz.github.io/fonts.css rel="stylesheet" />
    

    
    


    

    
    <link rel="alternate" type="application/atom+xml" title="Nick Guzzardo" href="https://NickGuz.github.io/atom.xml">


    
    
        <link rel="stylesheet" type="text/css" href="https://NickGuz.github.io/theme/dark.css" />
    
    
    <!-- Set the correct theme in the script -->
    <script src=https://NickGuz.github.io/js/themetoggle.js></script>
    
        <script>setTheme("dark");</script>
    

    <link rel="stylesheet" type="text/css" media="screen" href=https://NickGuz.github.io/main.css />

    
</head>


<body>
    <div class="content">
        <header>
    <div class="main">
        <a href=https:&#x2F;&#x2F;NickGuz.github.io>Nick Guzzardo</a>

        <div class="socials">
            
            <a rel="me" href="https:&#x2F;&#x2F;github.com&#x2F;nickguz&#x2F;" class="social">
                <img alt=github src=https://NickGuz.github.io/social_icons/github.svg>
            </a>
            
        </div>
    </div>

    <nav>
        
        <a href=https://NickGuz.github.io/posts style="margin-left: 0.7em">&#x2F;posts</a>
        
        <a href=https://NickGuz.github.io/projects style="margin-left: 0.7em">&#x2F;projects</a>
        
        <a href=https://NickGuz.github.io/about style="margin-left: 0.7em">&#x2F;about</a>
        

        
    </nav>
</header>


        
        
    
<main>
    <article>
        <div class="title">
            
            
    <div class="page-header">
        Trackmania with Openplanet on Steam Deck&#x2F;Linux<span class="primary-color" style="font-size: 1.6em">.</span>
    </div>


                <div class="meta">
                    
                        Posted on <time>2023-01-16</time>
                    

                    
                </div>
        </div>

        

        
        
            
                <h1>Table of Contents</h1>
                <ul>
                
                    <li>
                        <a href="https://NickGuz.github.io/posts/trackmania-openplanet-linux/#base-game-installation">Base Game Installation</a>
                        
                    </li>
                
                    <li>
                        <a href="https://NickGuz.github.io/posts/trackmania-openplanet-linux/#openplanet-installation">Openplanet Installation</a>
                        
                    </li>
                
                </ul>
            
        

        <section class="body">
            <p>This guide is still untested, but in theory should work on the steam deck or any
other linux distro. Maybe pictures coming soon.</p>
<!--more-->
<h2 id="base-game-installation">Base Game Installation</h2>
<p>Download the Ubisoft Connect installer to your Downloads directory</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">curl -o </span><span>$</span><span style="color:#bf616a;">HOME</span><span>/Downloads/UbisoftConnectInstaller.exe</span><span style="color:#bf616a;"> -L</span><span> https://ubi.li/4vxt9
</span></code></pre>
<p>Now we want to add the installer to steam:</p>
<ol>
<li>Click &quot;Add a Game&quot;, then &quot;Add a Non-Steam game&quot; in the bottom left of your
steam library.</li>
<li>Click &quot;Browse&quot; and find the installer we just downloaded. You will probably
need to change the &quot;Look in&quot; directory at the top to something like
/home/username in the dropdown. Also change file type to &quot;All Files&quot; so you
can actually see the .exe file.</li>
<li>Open the file, then click &quot;Add Selected Programs&quot;.</li>
<li>Find UbisoftConnectInstaller.exe in your library now, right click it and go
to properties.</li>
<li>Click &quot;Compatibility&quot;, check &quot;Force the use of a specific Steam Play
compatibility tool, then pick &quot;Proton Experimental&quot; from the dropdown. Note:
this may break in the future, but at the current moment proton experimental
works well for this. If it doesn't work, try using an older version of
proton.</li>
</ol>
<p>Now you can just click &quot;Play&quot; and you should see the installer popup. Just run
through this like usual, but don't check the box at the end to start the
launcher just yet.</p>
<p>Once this is done, we want to change this library entry to open the launcher we
just installed instead of the installer.</p>
<ol>
<li>Go back into the ubisoft launcher properties in steam.</li>
<li>Click &quot;Browse&quot; under &quot;Target&quot; and &quot;Start In&quot; and select &quot;UbisoftConnect.exe&quot;
from the wine prefix we just created. This should be the most recently
updated prefix in <code>/home/deck/.local/share/Steam/steamapps/compatdata</code>. The
full path will look something like<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span>&quot;</span><span style="color:#a3be8c;">/home/nickguz/.steam/steam/steamapps/compatdata/2965145486/pfx/drive_c/Program Files (x86)/Ubisoft/Ubisoft Game Launcher/UbisoftConnect.exe</span><span>&quot;
</span></code></pre>
</li>
</ol>
<p>&quot;Play&quot; this again and it'll open the Ubisoft launcher. Sign in and download
Trackmania like usual.</p>
<h2 id="openplanet-installation">Openplanet Installation</h2>
<ol>
<li>
<p>Download the Openplanet installer from <a href="https://openplanet.dev/download">https://openplanet.dev/download</a>. Leave
it in your Downloads directory.</p>
</li>
<li>
<p>We want to run the installer with the same proton version and wine prefix
that we just used. Assuming that your most recently updated directory is the
one we've been working with, you should be able to run these commands, maybe
modifying the steam directory location:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># This will grab your most recently modified compatibility directory, so
</span><span style="color:#65737e;"># don&#39;t run this if you&#39;ve added another one since installing Ubisoft Connect.
</span><span style="color:#65737e;"># If you have, you&#39;ll have to go to your compatdata directory and find it
</span><span style="color:#bf616a;">tm_pfx</span><span>=$</span><span style="color:#a3be8c;">(</span><span style="color:#bf616a;">ls -At </span><span>$</span><span style="color:#bf616a;">HOME</span><span style="color:#a3be8c;">/.local/share/Steam/steamapps/compatdata </span><span>| </span><span style="color:#bf616a;">head -1</span><span style="color:#a3be8c;">)
</span><span>
</span><span style="color:#65737e;"># Set the Proton directory to use. If you didn&#39;t use experimental, you&#39;ll need to choose whichever version you did use
</span><span style="color:#bf616a;">proton_dir</span><span>=&quot;$</span><span style="color:#bf616a;">HOME</span><span style="color:#a3be8c;">/.local/share/Steam/steamapps/common/Proton - Experimental</span><span>&quot;
</span><span>
</span><span style="color:#65737e;"># Now run the installer. You might need to change the Openplanet filename if a newer version has been released
</span><span style="color:#bf616a;">WINEPREFIX</span><span>=$</span><span style="color:#bf616a;">HOME</span><span style="color:#a3be8c;">/.local/share/Steam/steamapps/compatdata/</span><span>$</span><span style="color:#bf616a;">tm_pfx</span><span style="color:#a3be8c;">/pfx </span><span>$</span><span style="color:#bf616a;">proton_dir/files/bin/wine </span><span>$</span><span style="color:#bf616a;">HOME</span><span>/Downloads/OpenplanetNext_1.25.21.exe
</span></code></pre>
</li>
<li>
<p>If everything was set properly in the last step, you should be able to run
through the installer like normal. You should be able to find Trackmania in
the C directory. It will be in <code>C:\Program Files (x86)\ Ubisoft\ Ubisoft Game Launcher\Games\Trackmania</code>. Select this directory. If you don't see that
there, the wine prefix is most likely not set correctly. Make sure it's set
to the pfx dir of the correct prefix.</p>
</li>
</ol>
<p>Okay, we're almost done. Now we just need to enable the <code>dinput8.dll</code>.</p>
<ol>
<li>Install protontricks if you don't already have it. On steam deck, this can be
done through Discover.</li>
<li>Now just search protontricks in the start menu -&gt; select the proper steam app
-&gt; Select the default wineprefix -&gt; Run winecfg to open the same menu.</li>
<li>Click the Libaries tab. In the &quot;New override for library&quot; box, enter
<code>dinput8</code> and click Add, Apply, OK.</li>
</ol>
<p>If all went well, the next time you boot up Trackmania you should see in the
topleft corner the little Openplanet notification. You probably want to edit
your controller layout if playing on steam deck and bind some button to F3 so
that you can actually open Openplanet.</p>
<p>And one last thing. If you want your Ubisoft Connect in steam to open Trackmania
directly, just add <code>uplay://launch/5595/0</code> to launch options. This will leave
the Ubisoft launcher open though after exiting, so just close that after closing
Trackmania, or just force close it through steam (B to abort on steam deck after
exiting Trackmania).</p>
<p>All done!</p>
<p><em>Credits to Darren Griffin who wrote <a href="https://mrdarrengriffin.com/installing-trackmania-on-the-steam-deck/">this post</a> of which I adapted the first half
of this guide from.</em></p>

        </section>

        

    </article>
</main>


        
        
    </div>
</body>

</html>
